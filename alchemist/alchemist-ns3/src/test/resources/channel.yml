incarnation: protelis

network-model:
  type: ConnectWithinDistance
  parameters: [4]

#realistic networking configuration
ns3:
  protocol: "TCP"
  packet-size: 0 #optional
  error-rate: 0.0001
  data-rate: "Default"
  serializer:
    type: it.unibo.alchemist.ns3.utils.DefaultNs3Serializer #optional

pools:
  - pool: &prog
    - time-distribution: 1
      type: Event
      actions:
        - type: RunProtelisProgram
          parameters: [channel, 5]
    - program: send

displacements: #there is a total of 27 nodes
  - in:
      type: Grid
      parameters: [-5, -5, 5, 5, 2, 2, 0, 0]
    programs:
      - *prog
  - in:
      type: Point
      parameters: [-5, -5]
    contents:
      - molecule: source
        concentration: true
    programs:
      - *prog
  - in:
      type: Point
      parameters: [5, 5]
    contents:
      - molecule: destination
        concentration: true
    programs:
      - *prog

terminate:
  - type: StableForSteps
    parameters: [300, 3]
