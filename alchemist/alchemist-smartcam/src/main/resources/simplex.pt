module simplex
import protelis:lang:utils
import protelis:coord:spreading
import protelis:coord:accumulation
import java.lang.System.out
import java.lang.Math.sqrt
import it.unibo.alchemist.model.smartcam.ProtelisUtils.CameraTargetAssignmentProblem
import it.unibo.alchemist.model.smartcam.ProtelisUtils.getCenterOfFovAtDistance
import it.unibo.alchemist.model.smartcam.ProtelisUtils.closestPositionToTargetAtDistance
import utils

let MAX_CAMERAS_PER_TARGET = 2;
let localTargets = getVision();
let targets = unionHood PlusSelf(nbr(localTargets));
let cameras = nbr(getCenterOfFovAtDistance(getFoVCenterDistance()));
let myTarget = CameraTargetAssignmentProblem.solve(cameras, targets, MAX_CAMERAS_PER_TARGET).getOrDefault(getUID(), noTarget());
followOrExplore(myTarget)
